<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Handling error messages • comtradeRggregator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Handling error messages">
<meta property="og:description" content="comtradeRggregator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">comtradeRggregator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/comtradeRggregator.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/handling-errors.html">Handling error messages</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/amannj/comtradeRggregator/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="handling-errors_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Handling error messages</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/amannj/comtradeRggregator/blob/master/vignettes/handling-errors.Rmd"><code>vignettes/handling-errors.Rmd</code></a></small>
      <div class="hidden name"><code>handling-errors.Rmd</code></div>

    </div>

    
    
<p><code>comtradeRggregator</code> uses <a href="https://github.com/ropensci/comtradr"><code>comtradr</code></a> to access Comtrade trade data using its <a href="https://comtrade.un.org/data/doc/api/">API</a>. This means that you sometimes are confronted with a set of API related error messages. To learn more about the different types of errors see <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">w3.org</a>.</p>
<div id="typical-api-error-messages-in-comtraderggregator-and-how-to-fix-them" class="section level1">
<h1 class="hasAnchor">
<a href="#typical-api-error-messages-in-comtraderggregator-and-how-to-fix-them" class="anchor"></a>Typical API error messages in <code>comtradeRggregator</code> and how to fix them</h1>
<div id="error-code-400" class="section level2">
<h2 class="hasAnchor">
<a href="#error-code-400" class="anchor"></a>Error code 400</h2>
<p>Typically, you get a <strong>400 (bad request) error</strong> whenever any of the input parameters ins specified incorrectly.</p>
<p>Double-check all input parameters for <code><a href="../reference/download_Comtrade.html">download_Comtrade()</a></code> for any issues/inconsistencies.</p>
</div>
<div id="error-code-409" class="section level2">
<h2 class="hasAnchor">
<a href="#error-code-409" class="anchor"></a>Error code 409</h2>
<p>One of the most common issues is that if you hit a usage limit a, <strong>409 (conflict) error</strong> is returned along with a message specifying why the request was blocked and when requests may resume.</p>
<p>Whenever such an error occurs during one of its queries, <code>comtradeRggregator</code> pauses the data query and, after a specified cool-off of an hour, tries to resume the download. This means that you can conveniently max out the user limit for bulk downloads, and <code>comtradeRggregator</code> will make sure your query fails because of usage limits. The limits for unauthenticated requests, i.e. guests, are set to 100 requests per hour (per IP address or authenticated user). See <a href="https://comtrade.un.org/data/doc/api/">Comtrade’s API help page</a> for more information.</p>
<p>However, this is <strong>not</strong> practice we wish to encourage. Instead, it is advised that for large bulk downloads you obtain an authentication code (token) which you can then use when calling <code><a href="../reference/download_Comtrade.html">download_Comtrade()</a></code>. This will allow you to</p>
<ol style="list-style-type: decimal">
<li><p>Follow the instruction on Comtrade’s API page to <a href="https://comtrade.un.org/data/doc/api/">Comtrade’s API help page</a> to get access to an authentication code (token).</p></li>
<li><p>You can check the validity of your token <a href="https://comtrade.un.org/ws/CheckRights.aspx">here</a>.</p></li>
<li><p>Use the token as input parameter <code>token</code> in function <code><a href="../reference/download_Comtrade.html">download_Comtrade()</a></code> to get unlimited (authenticated) usage of 10,000 requests per hour .</p></li>
</ol>
</div>
<div id="error-code-500" class="section level2">
<h2 class="hasAnchor">
<a href="#error-code-500" class="anchor"></a>Error code 500</h2>
<p>Unexplored/unspecified error. <code>comtradeRggregator</code> will pause the download for 60 seconds and re-send the last unsuccessful query again.</p>
<p>This should typically eliminate the issue and your request should go through after at most a handful of attempts.</p>
<p>In case you are running a very large request, consider increasing the interval between every single request by increasing the parameter value for <code>sleep</code> in <code><a href="../reference/download_Comtrade.html">download_Comtrade()</a></code>.</p>
</div>
</div>
<div id="other-error-messages" class="section level1">
<h1 class="hasAnchor">
<a href="#other-error-messages" class="anchor"></a>Other error messages</h1>
<p>Sometimes, especially when downloading large(r) chunks of data, you might run into the following error message.</p>
<pre><code>Error in curl::curl_fetch_memory(url, handle = handle) : 
  Operation was aborted by an application callback</code></pre>
<p>From experience, and in context of this package, the error message does not relate to the memory of the app, but rather the file you are trying to download with <code>curl</code>. In other words, there are limits on the respective file sizes and download times per file, and <code>curl</code> might hit one of those limits.</p>
<p>In such a case, try re-running your <code><a href="../reference/download_Comtrade.html">download_Comtrade()</a></code> query by reducing the value for <code>ext_cnt</code> which sets the number of countries extracted with each query (default and maximum is 5). The lower the number for <code>ext_cnt</code>, the fewer countries are downloaded simultaneously, hence the smaller the file size and the shorter the download time.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://amannj.github.io">Juergen Amann</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
